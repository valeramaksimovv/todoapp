{% extends "base.html" %}

{% block content %}
<div class="actions-bar">
    <a class="btn" href="{% url 'board' %}">← Back to board</a>
    <a class="btn btn-primary" href="{% url 'user_create' %}">+ Create user</a>
</div>

<div class="panel">
    <h1>Users</h1>
    <p>Only staff can manage users.</p>

    <table class="table">
        <thead>
            <tr>
                <th style="width: 70px;">ID</th>
                <th>Username</th>
                <th>Email</th>
                <th style="width: 90px;">Active</th>
                <th style="width: 160px;">Action</th>
            </tr>
        </thead>

        <tbody>
            {% for u in users %}
            <tr>
                <td>#{{ u.id }}</td>
                <td>{{ u.username }}</td>
                <td>{{ u.email|default:"—" }}</td>
                <td>
                    {% if u.is_active %}
                    <span style="color: var(--success); font-weight: 650;">Yes</span>
                    {% else %}
                    <span style="color: var(--danger); font-weight: 650;">No</span>
                    {% endif %}
                </td>

                <td>
                    {% if u.id != request.user.id %}
                    <form method="post" action="{% url 'user_toggle' u.id %}">
                        {% csrf_token %}
                        {% if u.is_active %}
                        <button class="btn btn-danger" type="submit">Disable</button>
                        {% else %}
                        <button class="btn btn-primary" type="submit">Enable</button>
                        {% endif %}
                    </form>
                    {% else %}
                    <span style="color: var(--muted-2);">—</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}